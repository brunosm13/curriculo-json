<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="Currículo do Bruno Silva Macário">
		<meta name="author" content="Bruno Silva Macário">

		<title>Bruno Silva Macário - Currículo</title>

		<!-- Principal CSS do Bootstrap -->
		<link href="./css/bootstrap.min.css" rel="stylesheet">
	
		<link href="https://fonts.googleapis.com/css?family=Alata&amp;display=swap" rel="stylesheet"> 
		<link href="https://fonts.googleapis.com/css?family=Zilla+Slab&amp;display=swap" rel="stylesheet">
		<link rel="icon" href="./img/google_docs_icon_131691.svg">

		
	</head>
  
	<body class="text-justify texto-padrao">
		<header id="cabecalhoSite" class="m-3 d-print-none">
		</header>
		
		<main id="conteudoSite" class="mr-0 ml-0 mt-0">
		</main>

		<footer class="ml-3 text-center d-print-none" id="rodapeSite">
		</footer>
		
		<script src="./js/jquery-3.3.1.slim.min.js"></script>
		<script src="./js/bootstrap.bundle.min.js"></script>
		<script src="./js/bootstrap.min.js"></script>
		
		<script id="execute-json" type="module">
			import Util from '/util';
			import HtmlBootstrap from '/html';

			// Inclui os dados da página
			carregarPaginaInicial();

			//Carrega dados dos JSON
			document.addEventListener('DOMContentLoaded', function() {
				// Promise.all é utilizado quando há mais de duas chamadas ao mesmo tempo
				Promise.all([
					fetch('server/data/curriculo').then(response => response.json()),
					fetch('server/data/fonte').then(response => response.json())
				])
				.then(([dadosPessoa, fonteConfig]) => {
					carregarCurriculo(dadosPessoa);
					alterarFonte(fonteConfig);
				})
				.catch(error => {
					console.error('Erro ao carregar os dados:', error);
				});
			});

			//document.getElementById('imprimir').addEventListener('click', function () {
			//	window.print();
			//});

			function carregarCurriculo(data) {	
				document.getElementById("atualizadoEm").appendChild(document.createTextNode(data.atualizadoEm));
				document.getElementById("nome").appendChild(document.createTextNode(data.nome));
				document.getElementById("titulo").appendChild(document.createTextNode(data.titulo));
				document.getElementById("idade").appendChild(document.createTextNode(Util.calcularIdade(Util.converteDataBR(data.dataNascimento))+' anos'));	
				document.getElementById("estadoCivil").appendChild(document.createTextNode(data.estadoCivil));
				document.getElementById("email").appendChild(document.createTextNode(data.emailPessoal));
				document.getElementById("email").setAttribute('href',`mailto:${data.emailPessoal}`);
				document.getElementById("linkedIn").appendChild(document.createTextNode(data.linkedIn));
				document.getElementById("linkedIn").setAttribute('href',data.linkedIn);
					
				// Carrega Lista de Formação Acadêmica com suas tags de exibição 
				const formacoesList = document.getElementById('formacoes');
				var dnone= "";
				data.formacoes.forEach(formacao => {
					//const li = document.createElement('li');
					const li= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.li);

					if (HtmlBootstrap.validarArgumento(formacao.TCC) ||
						HtmlBootstrap.validarArgumento(formacao.TCClink))
						dnone= "d-none";

					// Nome da Instituto
					let spanInstituto= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span, 'font-weight-bold border-bottom border-secondary', formacao.instituto);
					// Dados
					let ulInstituto= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.ul);
					spanInstituto.appendChild(ulInstituto);
					//Área	
					let lblArea= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.li);
					let txtArea= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'font-weight-bold','Área: ');
					let valArea= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'texto-destaque',formacao.area)
					lblArea.appendChild(txtArea);
					lblArea.appendChild(valArea);
					ulInstituto.appendChild(lblArea);
					//Concluído em	
					let lblConcluidoEm= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.li);
					let txtConcluidoEm= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'font-weight-bold','Concluído em: ');
					let valConcluidoEm= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'texto-destaque',formacao.concluidoEm);
					lblConcluidoEm.appendChild(txtConcluidoEm);
					lblConcluidoEm.appendChild(valConcluidoEm);
					ulInstituto.appendChild(lblConcluidoEm);
					
					//TCC	
					let lblTCC= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.li,dnone);
					let txtTCC= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'font-weight-bold','TCC: ');
					let valTCC= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.a,'texto-padrao-link',formacao.TCC,formacao.TCClink,'TCC','tooltip');
					lblTCC.appendChild(txtTCC);
					lblTCC.appendChild(valTCC);
					ulInstituto.appendChild(lblTCC);

					li.appendChild(spanInstituto);
					li.appendChild(ulInstituto);

					formacoesList.appendChild(li);});
				
				// Carrega Lista de Experiências com suas tags de exibição 
				const experienciasList = document.getElementById('experiencias');
				data.experiencias.forEach(experiencia => {
					const li = HtmlBootstrap.criarElemento(HtmlBootstrap.tag.li);

					// Nome da Empresa
					let spanEmpresa= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'font-weight-bold border-bottom border-secondary',experiencia.empresa);
					// Dados
					let ulEmpresa= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.ul);
					spanEmpresa.appendChild(ulEmpresa);
					//Cargo
					let lblCargo= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.li);
					let txtCargo= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'font-weight-bold','Cargo: ');
					let valCargo= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'texto-destaque',experiencia.cargo)
					lblCargo.appendChild(txtCargo);
					lblCargo.appendChild(valCargo);
					ulEmpresa.appendChild(lblCargo);
					//Modalidade
					let lblModalidade= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.li);
					let txtModalidade= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'font-weight-bold','Modalidade: ');
					let valModalidade= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'',experiencia.modalidade);
					lblModalidade.appendChild(txtModalidade);
					lblModalidade.appendChild(valModalidade);
					ulEmpresa.appendChild(lblModalidade);
					
					//Período
					let lblPeriodo= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.li);
					let txtPeriodo= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'font-weight-bold','Período: ')
					let valPeriodo= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'',experiencia.periodo);
					lblPeriodo.appendChild(txtPeriodo);
					lblPeriodo.appendChild(valPeriodo);
					ulEmpresa.appendChild(lblPeriodo);

					//Atividades
					let lblAtividades= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.li);
					let txtAtividades= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'font-weight-bold','Atividades: ');
					let valAtividades= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'',experiencia.atividades);
					lblAtividades.appendChild(txtAtividades);
					lblAtividades.appendChild(valAtividades);
					ulEmpresa.appendChild(lblAtividades);
					
					li.appendChild(spanEmpresa);
					li.appendChild(ulEmpresa);
					experienciasList.appendChild(li);});
				
				// Carrega Lista de Cursos Treinamentos Certificações com suas tags de exibição 
				const CursosTreinamentosCertificacoesList = document.getElementById('CursosTreinamentosCertificacoes');
				data.CursosTreinamentosCertificacoes.forEach(item => {
					const li = HtmlBootstrap.criarElemento(HtmlBootstrap.tag.li);

					// Tipo
					let lblTipo= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'font-weight-bold',item.tipo+': ');
					li.appendChild(lblTipo);
					// Nome
					let lblNome= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.a,'texto-destaque',item.nome,item.link,item.nome);
					li.appendChild(lblNome);
					// Onde
					li.appendChild(document.createTextNode(', '+item.onde));
					// Quando
					let lblQuando= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.span,'font-weight-bold',item.quando);
					li.appendChild(lblQuando);

					CursosTreinamentosCertificacoesList.appendChild(li);});
						
				// Carrega Lista de Informações com suas tags de exibição 
				const InformacoesBasicasList = document.getElementById('InformacoesBasicas');
				data.InformacoesBasicas.forEach(item => {
					const li= HtmlBootstrap.criarElemento(HtmlBootstrap.tag.li);

					// Informação
					li.appendChild(document.createTextNode(item));

					InformacoesBasicasList.appendChild(li);});	
				
				const rodapeSite = document.getElementById('rodapeSite');
				rodapeSite.appendChild(document.createTextNode(data.rodapeSite + ' (v20240629)'));
			
				// document.getElementById('execute-json').remove();
			}

			function carregarPaginaInicial(){
				// ----  HEADER ----- Cabeçalho do Site
				let header = document.getElementById('cabecalhoSite');

				// Botão Imprimir
				let btnImprimir = HtmlBootstrap.criarButton('imprimir', 'btn-outline-secondary btn-lg btn-block',' Imprimir', HtmlBootstrap.funcao.imprimir);	
				header.appendChild(btnImprimir);

				// ----  MAIN ----- Conteúdo do Site
				let main = document.getElementById('conteudoSite');

				// Grupo do cabeçalho
				let hgroupSite = HtmlBootstrap.criarElemento(HtmlBootstrap.tag.hgroup,'clearfix mx-5 mt-3');
				// Atualizado em:
				let h6AtualizadoEm= HtmlBootstrap.criarElementoId(HtmlBootstrap.tag.h6,'atualizadoEm','ml-3 float-left');
				hgroupSite.appendChild(h6AtualizadoEm);

				// Título:
				let h1AtualizadoEm = HtmlBootstrap.criarElementoId(HtmlBootstrap.tag.p,'titulo','titulo-site float-right text-right h1 mr-4 font-weight-normal font-italic');
				hgroupSite.appendChild(h1AtualizadoEm); // hgroup não aceita 2 cabeçalho dentro da tag.

				// CONTINUAR REFATORAÇÃO
				// Título:
				let cardDadosPrincipais = document.createElement('div');
				cardDadosPrincipais.setAttribute('class', 'card mx-5 border-top-0 border-right-0 border-left-0');

				// DADOS PRINCIPAIS
				let cardbodyDadosPrincipais = document.createElement('div');
				cardbodyDadosPrincipais.setAttribute('class', 'card-body');
				cardDadosPrincipais.appendChild(cardbodyDadosPrincipais);

				//Nome
				let lblNome = document.createElement('p');
				lblNome.setAttribute('id', 'nome');
				lblNome.setAttribute('class', 'titulo-principal card-title h1 w-auto border-bottom border-secondary');
				cardbodyDadosPrincipais.appendChild(lblNome);

				//Idade
				let lblIdade = document.createElement('p');
				lblIdade.setAttribute('class', 'm-0 p-0');
				let txtIdade = document.createElement('span');
				txtIdade.setAttribute('class', 'font-weight-bold');
				let valIdade = document.createElement('span');
				valIdade.setAttribute('id', 'idade');
				txtIdade.appendChild(document.createTextNode('Idade: '));
				lblIdade.appendChild(txtIdade);
				lblIdade.appendChild(valIdade);
				cardbodyDadosPrincipais.appendChild(lblIdade);

				//Estado Cívil
				let lblEstadoCivil = document.createElement('p');
				lblEstadoCivil.setAttribute('class', 'm-0 p-0');
				let txtEstadoCivil = document.createElement('span');
				txtEstadoCivil.setAttribute('class', 'font-weight-bold');
				let valEstadoCivil = document.createElement('span');
				valEstadoCivil.setAttribute('id', 'estadoCivil');
				txtEstadoCivil.appendChild(document.createTextNode('Estado Cívil: '));
				lblEstadoCivil.appendChild(txtEstadoCivil);
				lblEstadoCivil.appendChild(valEstadoCivil);
				cardbodyDadosPrincipais.appendChild(lblEstadoCivil);
				
				//E-mail Pessoal
				let lblEmail = document.createElement('p');
				lblEmail.setAttribute('class', 'm-0 p-0');
				let txtEmail = document.createElement('span');
				txtEmail.setAttribute('class', 'font-weight-bold');
				let valEmail = document.createElement('a');
				valEmail.setAttribute('id', 'email');
				valEmail.setAttribute('class', 'texto-padrao-link');
				valEmail.setAttribute('title', 'E-mail pessoal');
				valEmail.setAttribute('data-toggle', 'tooltip');
				valEmail.setAttribute('href', '');
				txtEmail.appendChild(document.createTextNode('E-mail Pessoal: '));
				lblEmail.appendChild(txtEmail);
				lblEmail.appendChild(valEmail);
				cardbodyDadosPrincipais.appendChild(lblEmail);

				//LinkedIn
				let lblLinkedIn = document.createElement('p');
				lblLinkedIn.setAttribute('class', 'm-0 p-0');
				let txtLinkedIn = document.createElement('span');
				txtLinkedIn.setAttribute('class', 'font-weight-bold');
				let valLinkedIn= document.createElement('a');
				valLinkedIn.setAttribute('id', 'linkedIn');
				valLinkedIn.setAttribute('class', 'texto-padrao-link');
				valLinkedIn.setAttribute('title', 'LinkedIn');
				valLinkedIn.setAttribute('data-toggle', 'tooltip');
				valLinkedIn.setAttribute('href', '');
				txtLinkedIn.appendChild(document.createTextNode('LinkedIn: '));
				lblLinkedIn.appendChild(txtLinkedIn);
				lblLinkedIn.appendChild(valLinkedIn);
				cardbodyDadosPrincipais.appendChild(lblLinkedIn);

				// FORMAÇÃO ACADÊMICA
				// Card
				let cardFormacoes = document.createElement('div');
				cardFormacoes.setAttribute('class', 'card mx-5 border-top-0 border-right-0 border-left-0');
				let cardbodyFormacoes = document.createElement('div');
				cardbodyFormacoes.setAttribute('class', 'card-body');
				cardFormacoes.appendChild(cardbodyFormacoes);

				//Título e Dados
				let lblFormacoes = document.createElement('div');
				lblFormacoes.setAttribute('class', 'titulo-secundario card-title h4 font-weight-bold');
				lblFormacoes.appendChild(document.createTextNode('FORMAÇÃO ACADÊMICA'));
				let listaFormacoes = document.createElement('ul');
				listaFormacoes.setAttribute('id', 'formacoes');
				listaFormacoes.setAttribute('style', 'list-style-type: square;');
				cardbodyFormacoes.appendChild(lblFormacoes);
				cardbodyFormacoes.appendChild(listaFormacoes);

				// EXPERIÊNCIAS PROFISSIONAIS
				// Card
				let cardExperiencias = document.createElement('div');
				cardExperiencias.setAttribute('class', 'card mx-5 border-top-0 border-right-0 border-left-0');
				let cardbodyExperiencias = document.createElement('div');
				cardbodyExperiencias.setAttribute('class', 'card-body');
				cardExperiencias.appendChild(cardbodyExperiencias);

				//Título e Dados
				let lblExperiencias = document.createElement('div');
				lblExperiencias.setAttribute('class', 'titulo-secundario card-title h4 font-weight-bold');
				lblExperiencias.appendChild(document.createTextNode('EXPERIÊNCIAS PROFISSIONAIS'));
				let listaExperiencias = document.createElement('ul');
				listaExperiencias.setAttribute('id', 'experiencias');
				listaExperiencias.setAttribute('style', 'list-style-type: square;');
				cardbodyExperiencias.appendChild(lblExperiencias);
				cardbodyExperiencias.appendChild(listaExperiencias);

				// CURSOS, TREINAMENTOS E CERTIFICAÇÕES
				// Card
				let cardCursosTreinamentosCertificacoes = document.createElement('div');
				cardCursosTreinamentosCertificacoes.setAttribute('class', 'card mx-5 border-top-0 border-right-0 border-left-0');
				let cardbodyCursosTreinamentosCertificacoes = document.createElement('div');
				cardbodyCursosTreinamentosCertificacoes.setAttribute('class', 'card-body');
				cardCursosTreinamentosCertificacoes.appendChild(cardbodyCursosTreinamentosCertificacoes);

				//Título e Dados
				let lblCursosTreinamentosCertificacoes = document.createElement('div');
				lblCursosTreinamentosCertificacoes.setAttribute('class', 'titulo-secundario card-title h4 font-weight-bold');
				lblCursosTreinamentosCertificacoes.appendChild(document.createTextNode('CURSOS, TREINAMENTOS E CERTIFICAÇÕES'));
				let listaCursosTreinamentosCertificacoes = document.createElement('ul');
				listaCursosTreinamentosCertificacoes.setAttribute('id', 'CursosTreinamentosCertificacoes');
				listaCursosTreinamentosCertificacoes.setAttribute('style', 'list-style-type: square;');
				cardbodyCursosTreinamentosCertificacoes.appendChild(lblCursosTreinamentosCertificacoes);
				cardbodyCursosTreinamentosCertificacoes.appendChild(listaCursosTreinamentosCertificacoes);

				// INFORMAÇÕES BÁSICAS
				// Card
				let cardInformacoesBasicas = document.createElement('div');
				cardInformacoesBasicas.setAttribute('class', 'card mx-5 border-top-0 border-right-0 border-left-0');
				let cardbodyInformacoesBasicas = document.createElement('div');
				cardbodyInformacoesBasicas.setAttribute('class', 'card-body');
				cardInformacoesBasicas.appendChild(cardbodyInformacoesBasicas);

				//Título e Dados
				let lblInformacoesBasicas = document.createElement('div');
				lblInformacoesBasicas.setAttribute('class', 'titulo-secundario card-title h4 font-weight-bold');
				lblInformacoesBasicas.appendChild(document.createTextNode('INFORMAÇÕES BÁSICAS'));
				let listaInformacoesBasicas = document.createElement('ul');
				listaInformacoesBasicas.setAttribute('id', 'InformacoesBasicas');
				listaInformacoesBasicas.setAttribute('style', 'list-style-type: square;');
				cardbodyInformacoesBasicas.appendChild(lblInformacoesBasicas);
				cardbodyInformacoesBasicas.appendChild(listaInformacoesBasicas);

				// Incluir informações no main
				main.appendChild(hgroupSite);
				main.appendChild(cardDadosPrincipais);
				main.appendChild(cardFormacoes);
				main.appendChild(cardExperiencias);
				main.appendChild(cardCursosTreinamentosCertificacoes);
				main.appendChild(cardInformacoesBasicas);

				// FOOTER - Rodapé do Site
				let footer = document.getElementById('rodapeSite');
			}

			function alterarFonte(dados) {
           		var elementos= document.querySelectorAll(".titulo-site");
            	
				elementos.forEach(function(elemento){
					elemento.style.fontFamily = dados.tituloSite;
					elemento.classList.add(dados.tituloSiteCor);
					});

				elementos = document.querySelectorAll(".titulo-principal");
            	elementos.forEach(function(elemento){
					elemento.style.fontFamily = dados.tituloPrincipal;
					elemento.classList.add(dados.tituloPrincipalCor);
					});

				elementos = document.querySelectorAll(".titulo-secundario");
            	elementos.forEach(function(elemento){
					elemento.style.fontFamily = dados.tituloSecundario;
					elemento.classList.add(dados.tituloSecundarioCor);
					});

				elementos = document.querySelectorAll(".texto-destaque");
            	elementos.forEach(function(elemento){
					elemento.style.fontFamily = dados.textoDestaque;
					elemento.classList.add(dados.textoDestaqueCor);
					});
					
				elementos = document.querySelectorAll(".texto-padrao");
            	elementos.forEach(function(elemento){
					elemento.style.fontFamily = dados.textoPadrao;
					elemento.classList.add(dados.textoPadraoCor);
					});	

				elementos = document.querySelectorAll(".texto-padrao-link");
            	elementos.forEach(function(elemento){
					elemento.style.fontFamily = dados.textoPadraoLink;
					elemento.classList.add(dados.textoPadraoLinkCor);
					});	
				
			}
		</script>
 
	</body>
</html>